!function(t){function i(i){for(var e,o,r=i[0],c=i[1],l=i[2],d=0,p=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&p.push(s[o][0]),s[o]=0;for(e in c)Object.prototype.hasOwnProperty.call(c,e)&&(t[e]=c[e]);for(u&&u(i);p.length;)p.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,i=0;i<n.length;i++){for(var a=n[i],e=!0,r=1;r<a.length;r++){var c=a[r];0!==s[c]&&(e=!1)}e&&(n.splice(i--,1),t=o(o.s=a[0]))}return t}var e={},s={app:0},n=[];function o(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=e,o.d=function(t,i,a){o.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:a})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,i){if(1&i&&(t=o(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var e in t)o.d(a,e,function(i){return t[i]}.bind(null,e));return a},o.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(i,"a",i),i},o.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},o.p="/";var r=window.webpackJsonp=window.webpackJsonp||[],c=r.push.bind(r);r.push=i,r=r.slice();for(var l=0;l<r.length;l++)i(r[l]);var u=c;n.push([0,"vendors~app"]),a()}({0:function(t,i,a){t.exports=a("56d7")},"56d7":function(t,i,a){"use strict";a.r(i),a("e260"),a("e6cf"),a("cca6"),a("a79d");var e=a("2b0e"),s=(a("cb29"),a("bc3a")),n=a.n(s),o=a("4328"),r=a.n(o),c={name:"Index",data:function(){return{show:!1,value:"",emailAddress:"",emailLoading:!1,showDialog:{manage:!1,subscribe:!1},userData:{first:{email:"",province:"",city:""},email:"",province:"",city:""},showData:{country:{},province:{},city:{}},editLoading:{email:!1,info:!1,fill:!1,unsubscribe:!1}}},watch:{"userData.province":{handler:function(){this.userData.province!==this.userData.first.province&&(0!==this.showData.province[this.userData.province].citiesName.length?this.userData.city=this.showData.province[this.userData.province].citiesName[0]:this.userData.city="无城市")},deep:!0}},mounted:function(){var t=this;n.a.get("https://node.ouorz.com/api/all").then((function(i){i.data.status&&(t.showData.country={confirm:i.data.total_confirmed,death:i.data.total_death,cured:i.data.total_cured},t.showData.province=i.data.data.provinces_data,t.showData.city=i.data.data.cities_data,t.show=!0)})).catch((function(){t.$Toast.show({type:"danger",text:"请求失败，请重试"})}))},methods:{verifyMailExist:function(){var t=this;this.emailLoading=!0,n.a.get("https://node.ouorz.com/verify/mail/exist/"+this.emailAddress).then((function(i){setTimeout((function(){i.data.status?(t.showDialog.subscribe=!1,t.editLoading.fill=!1,t.showDialog.manage=!0,t.userData={first:{email:i.data.data.email,province:void 0===i.data.data.province?"无省份":i.data.data.province,city:i.data.data.city},email:i.data.data.email,province:void 0===i.data.data.province?"无省份":i.data.data.province,city:i.data.data.city}):t.subscribeEmail(),t.emailLoading=!1}),500)})).catch((function(){setTimeout((function(){t.$Toast.show({type:"danger",text:"请求失败，请重试"}),t.emailLoading=!1}),500)}))},subscribeEmail:function(){var t=this;n.a.post("https://node.ouorz.com/subscribe/mail",r.a.stringify({email:this.emailAddress})).then((function(i){i.data.status?(t.$Toast.show({type:"success",text:i.data.msg}),t.userData.email=t.emailAddress,t.showDialog.subscribe=!0):(t.$Toast.show({type:"warning",text:i.data.msg}),t.emailAddress="")})).catch((function(){t.$Toast.show({type:"danger",text:"请求失败，请重试"})}))},unsubscribeEmail:function(){var t=this;this.editLoading.unsubscribe=!0,n.a.post("https://node.ouorz.com/unsubscribe/mail",r.a.stringify({email:this.userData.email})).then((function(i){i.data.status?setTimeout((function(){t.$Toast.show({type:"success",text:i.data.msg}),t.editLoading.unsubscribe=!1,window.location.reload()}),500):t.$Toast.show({type:"danger",text:"请求失败，请重试"})})).catch((function(){t.$Toast.show({type:"danger",text:"请求失败，请重试"}),t.editLoading.unsubscribe=!1}))},fillInfo:function(){var t=this;this.editLoading.fill=!0,setTimeout((function(){t.verifyMailExist()}),500)},editEmail:function(){var t=this;this.editLoading.email=!0,n.a.post("https://node.ouorz.com/subscribe/mail/edit",r.a.stringify({original_email:this.userData.first.email,current_email:this.userData.email})).then((function(i){i.data.status?(t.$Toast.show({type:"success",text:i.data.msg}),t.userData.first.email=t.userData.email):(t.$Toast.show({type:"warning",text:i.data.msg}),t.userData.email=t.userData.first.email),t.editLoading.email=!1})).catch((function(){t.$Toast.show({type:"danger",text:"请求失败，请重试"}),t.userData.email=t.userData.first.email,t.editLoading.email=!1}))},editInfo:function(){var t=this;this.editLoading.info=!0,n.a.post("https://node.ouorz.com/subscribe/mail/edit/info",r.a.stringify({email:this.userData.first.email,province:this.userData.province,city:this.userData.city})).then((function(i){i.data.status?(t.$Toast.show({type:"success",text:i.data.msg}),t.userData.first.province=t.userData.province,t.userData.first.city=t.userData.city):(t.$Toast.show({type:"warning",text:i.data.msg}),t.userData.province=t.userData.first.province,t.userData.city=t.userData.first.city),t.editLoading.info=!1})).catch((function(){t.$Toast.show({type:"danger",text:"请求失败，请重试"}),t.userData.province=t.userData.first.province,t.userData.city=t.userData.first.city,t.editLoading.info=!1}))}}},l=(a("6c2d"),a("2877")),u={name:"app",components:{Index:Object(l.a)(c,(function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"container"},[t.show?a("div",{staticClass:"wap"},[t._m(0),a("zi-note",[t._v(" 数据将实时同步并自 "),a("zi-link",{attrs:{href:"https://ncov.dxy.cn/ncovh5/view/pneumonia",color:""}},[t._v("丁香园·丁香医生")]),t._v(" 获取 ")],1),a("div",{staticClass:"form"},[a("div",[a("zi-row",{attrs:{gutter:"15"}},[a("zi-col",{attrs:{span:"16"}},[a("zi-input",{staticClass:"email",attrs:{"prefix-label":"Email",type:"email",placeholder:"example@email.com",autofocus:"",size:"big"},nativeOn:{keyup:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"enter",13,i.key,"Enter")?null:t.verifyMailExist()}},model:{value:t.emailAddress,callback:function(i){t.emailAddress=i},expression:"emailAddress"}})],1),a("zi-col",{attrs:{span:"8"}},[a("zi-button",{staticClass:"subscribe",attrs:{type:"success",loading:t.emailLoading},on:{click:function(i){return t.verifyMailExist()}}},[a("i",{staticClass:"ri-mail-send-line icon"}),t._v(" 订阅 / 管理 ")])],1)],1)],1)]),a("div",{staticClass:"rss"},[a("zi-card",[a("i",{staticClass:"ri-rss-fill icon"}),t._v(" RSS 订阅地址： "),a("zi-link",{attrs:{href:"https://node.ouorz.com/rss",color:""}},[t._v("https://node.ouorz.com/rss")])],1)],1),a("zi-dialog",{attrs:{title:"管理订阅",done:"完成",cancel:"取消"},model:{value:t.showDialog.manage,callback:function(i){t.$set(t.showDialog,"manage",i)},expression:"showDialog.manage"}},[a("div",{staticClass:"dialog-section"},[a("zi-description",{attrs:{title:"修改你的推送订阅邮箱地址",content:"修改邮箱地址"}}),a("div",{staticClass:"dialog-input"},[a("zi-row",{attrs:{gutter:"15"}},[a("zi-col",{attrs:{span:"16"}},[a("zi-input",{staticClass:"dialog-email",attrs:{size:"medium",type:"email"},nativeOn:{keyup:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"enter",13,i.key,"Enter")?null:t.editEmail()}},model:{value:t.userData.email,callback:function(i){t.$set(t.userData,"email",i)},expression:"userData.email"}})],1),a("zi-col",{attrs:{span:"8"}},[a("zi-button",{staticClass:"edit-button-1",attrs:{size:"medium",type:"primary",loading:t.editLoading.email,auto:""},on:{click:function(i){return t.editEmail()}}},[t._v("修改")])],1)],1)],1)],1),a("div",{staticClass:"dialog-section"},[a("zi-description",{attrs:{title:"修改你的推送订阅省份与城市信息",content:"修改数据源"}}),a("div",{staticClass:"dialog-input"},[a("zi-row",{attrs:{gutter:"15"}},[a("zi-col",{attrs:{span:t.userData.province&&"无省份"!==t.userData.province?9:13}},[a("zi-select",{attrs:{size:"medium"},model:{value:t.userData.province,callback:function(i){t.$set(t.userData,"province",i)},expression:"userData.province"}},["无省份"==t.userData.province?[a("zi-option",{attrs:{value:"无省份",selected:"selected"}},[t._v("无省份")])]:t._e(),t._l(t.showData.province,(function(i,e){return a("zi-option",{key:e,attrs:{value:i.provinceName}},[t._v(t._s(i.provinceName))])}))],2)],1),t.userData.province&&"无省份"!==t.userData.province?a("zi-col",{attrs:{span:"9"}},[a("zi-select",{attrs:{size:"medium"},model:{value:t.userData.city,callback:function(i){t.$set(t.userData,"city",i)},expression:"userData.city"}},[0==t.showData.province[t.userData.province].citiesName.length?[a("zi-option",{attrs:{selected:"selected",value:"无城市"}},[t._v("无城市")])]:t._l(t.showData.province[t.userData.province].citiesName,(function(i,e){return a("zi-option",{key:e,attrs:{value:i}},[t._v(t._s(i))])}))],2)],1):t._e(),a("zi-col",{attrs:{span:"5"}},[a("zi-button",{staticClass:"edit-button-2",attrs:{type:"primary",size:"medium",auto:"",loading:t.editLoading.info},on:{click:function(i){return t.editInfo()}}},[t._v("修改")])],1)],1)],1)],1),a("div",{staticClass:"dialog-section"},[a("zi-description",{attrs:{title:"退出每日疫情数据推送订阅",content:"退出订阅"}}),a("div",{staticClass:"dialog-input"},[a("zi-tooltip",{attrs:{content:"你将需要重新输入邮箱地址以再次订阅",placement:"top"}},[a("zi-button",{staticClass:"edit-button-2",attrs:{loading:t.editLoading.unsubscribe,type:"danger",size:"medium",auto:""},on:{click:function(i){return t.unsubscribeEmail()}}},[t._v("退出邮件订阅")])],1)],1)],1)]),a("zi-dialog",{attrs:{title:"订阅成功",done:"完成",cancel:"取消"},model:{value:t.showDialog.subscribe,callback:function(i){t.$set(t.showDialog,"subscribe",i)},expression:"showDialog.subscribe"}},[a("div",{staticClass:"subscribe-success"},[a("p",[t._v("你已经成功订阅疫情数据每日推送，请完善订阅信息")]),a("p",[t._v("你将在每天 11:00 收到你所选择的省份/城市最新数据与全国状况统计")]),a("p",[t._v(" 我们将使用 "),a("b",[t._v("noreply@eugrade.com")]),t._v(" 进行邮件推送 ")]),a("p",[t._v("请尝试加入邮箱白名单以确保订阅正常")])]),a("zi-row",{attrs:{gutter:"15"}},[a("zi-col",{attrs:{span:"15"}},[a("zi-button",{staticClass:"edit-button",attrs:{loading:t.editLoading.fill,type:"success",size:"medium",auto:""},on:{click:function(i){return t.fillInfo()}}},[t._v("订阅信息完善")])],1),a("zi-col",{attrs:{span:"9"}},[a("zi-button",{staticClass:"edit-button",attrs:{loading:t.editLoading.unsubscribe,size:"medium",auto:""},on:{click:function(i){return t.unsubscribeEmail()}}},[t._v("取消订阅")])],1)],1)],1),a("div",{staticClass:"qanda"},[a("zi-fieldset",[a("h1",[a("i",{staticClass:"ri-mail-fill icon"}),t._v(" 如何使用 Email 邮箱订阅疫情数据推送 ")]),a("p",[t._v("你可以使用本页页面上方的邮箱输入框进行订阅，系统将自动检测邮箱的订阅状态。使用邮件订阅服务的已订阅用户将可以对订阅服务进行个性化管理，订阅者能够随时修改:")]),a("p",{staticClass:"tag"},[a("zi-tag",[t._v("订阅邮箱地址")]),a("zi-tag",[t._v("订阅城市")]),a("zi-tag",[t._v("订阅省份")]),a("zi-tag",[t._v("订阅状态")])],1),a("p",[t._v(" 成为订阅者后你将在每天的 "),a("b",[t._v("11:00")]),t._v(" 收到一份包含 "),a("b",[t._v("全国数据")]),t._v("、 "),a("b",[t._v("省份/城市")]),t._v("数据的邮件推送。你也可以使用订阅服务管理随时退出取消邮件订阅。 ")])]),a("zi-fieldset",[a("h1",[a("i",{staticClass:"ri-rss-fill icon"}),t._v(" 如何使用 RSS 地址订阅疫情数据推送 ")]),a("p",[t._v("你可以使用本页页面上方的 RSS 链接进行订阅，系统将自动生成包含全国数据、全国全省数据、全国全市数据内容段。订阅方法可见:")]),a("p",[a("zi-tag",{staticClass:"link"},[a("zi-link",{attrs:{href:"http://jingyan.baidu.com/article/e73e26c0c73e1f24adb6a70f.html"}},[t._v("http://jingyan.baidu.com/article/e73e26c0c73e1f24adb6a70f.html")])],1)],1),a("p",[t._v(" 我们的 RSS 订阅源每 "),a("b",[t._v("5:00")]),t._v(" 分钟更新一次，你可以随时在你使用的订阅端取消订阅。 ")])]),a("zi-fieldset",[a("h1",[a("i",{staticClass:"ri-code-box-fill icon"}),t._v(" 全国疫情数据 API 接口文档 "),a("zi-tag",{attrs:{type:"success"}},[t._v("服务状态 : 正常")])],1),a("p",[t._v("你可以使用以下接口进行查询，支持跨域请求，系统将自动生成 Json 数据并返回。API 接口列表和使用方法如下:")]),a("p",[a("zi-tag",{staticClass:"link"},[t._v("全国全省全市数据: https://node.ouorz.com/api/all")]),a("zi-tag",{staticClass:"link"},[t._v("全省数据: https://node.ouorz.com/api/province/:province")]),a("zi-tag",{staticClass:"link"},[t._v("全市数据: https://node.ouorz.com/api/city/:city")])],1),a("p",[t._v("API 请求样例，注意城市名不带「市」：")]),a("p",[a("zi-tag",{staticClass:"link"},[t._v("四川省数据: https://node.ouorz.com/api/province/四川省")]),a("br"),a("zi-tag",{staticClass:"link"},[t._v("成都市数据: https://node.ouorz.com/api/city/成都")])],1)])],1),a("div",{staticClass:"copy"},[a("p",[a("zi-link",{attrs:{href:"https://github.com/HelipengTony/virus_notificator_vue"}},[a("i",{staticClass:"ri-github-fill icon git"}),t._v(" Open-Source ")]),t._v(" | Made with "),a("i",{staticClass:"ri-heart-2-fill icon"}),t._v(" by "),a("zi-link",{attrs:{href:"https://www.ouorz.com"}},[t._v("TonyHe")])],1)])],1):a("div",[a("vue-article-skeleton")],1)])}),[function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"title"},[a("h1",[t._v("新型冠状病毒疫情数据订阅")]),a("p",[t._v("使用邮箱或 RSS 订阅 2019-nCov 疫情数据每日推送")])])}],!1,null,null,null).exports}},d=Object(l.a)(u,(function(){var t=this.$createElement,i=this._self._c||t;return i("div",{attrs:{id:"app"}},[i("Index")],1)}),[],!1,null,null,null).exports,p=a("f64e"),v=a.n(p),f=(a("f8c4"),a("ab05"),a("19d0"));e.default.use(f.a),e.default.use(v.a),e.default.config.productionTip=!1,new e.default({render:function(t){return t(d)}}).$mount("#app")},"6c2d":function(t,i,a){"use strict";var e=a("b01c");a.n(e).a},b01c:function(t,i,a){}});